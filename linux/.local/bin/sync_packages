#!/bin/bash

set -e

# We must build the package from the actual files, not the symlinks.
base_dir="${HOME}/.dotfiles/linux/.config/my-metapackage"
package_dir="${base_dir}/my-metapackage"
package_file="${base_dir}/my-metapackage.deb"

echo "Updating package list..."
sudo apt update

echo "Installing packages..."
dpkg-deb --root-owner-group --build "$package_dir" "$package_file"
sudo apt install "$package_file"
rm "$package_file"

echo "Removing packages..."
sudo apt autoremove

echo "Upgrading packages..."
sudo apt upgrade

echo "Done."

